                        <!-- 
                            信管创业基地 post.html
                            Design And Build By 倪云港
                            Email: yungangni@gmail.com
                            Github: http://github.com/niyungang
                         -->
<!-- 文章内容 -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
							<!-- 
							信管创业基地 head-post.html
							Design And Build By 倪云港
							Email: yungangni@gmail.com
							Github: http://github.com/niyungang
						 -->
						 
<!-- 
	文章内容head
 -->
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Content-Type实体首部字段-2015信管创业基地-愿景:用心铸造 卓越Offer" />
<meta name="keywords" content="Content-Type实体首部字段,信管创业基地,ImWeb,哈尔滨,黑龙江大学,前端技术,后端技术,jekyll,html5,css3,github,node.js,veu.js,java,技术交流,Sublime3 Text,CreateJs,Ajax" />

<title>Web开发 | 2015信管创业基地官方博客 | 愿景:用心铸造卓越offer </title>

<!-- <link rel="stylesheet" type="text/css" href="/assets/css/main.min.css"> -->
<link rel="stylesheet" type="text/css" href="/assets/css/main.css">
<link rel="stylesheet" type="text/css" href="/assets/css/post.css">
<link rel="stylesheet" type="text/css" href="/assets/css/rouge.min.css">

</head>

<body>
    <!-- Post Header -->
    <a class="post-logo" href="/index.html">
        <img src="/assets/img/logo.png" alt="logo">
        <div class="logo-name liuguang">信管创业基地</div>
    </a>

	<header class="post-header">
		<img id="post-img" class="post-img">
		<section class="post-title">
			<h1 class="article-title">
				Content-Type实体首部字段
			</h1>
			<section class="article-category">
				http
			</section>
	        <section class="article-info">
	        	Posted by YanLong on April 25, 2016
	        </section>
		</section>
	</header>

    <!-- Post Box -->
    <section class="post-box">
        <article class="post-body">
            <p>  现代互联网下，每天都会有数以亿计的各种媒体对象经由HTTP传输，如图像，文本，影视以及软件程序等。这些数据都包含在HTTP报文的实体内容中，如果把HTTP报文想像成一份快递，HTTP实体就是快递实际的货物，而首部字段只是贴在快递上用来描述货物的信息。HTTP必须确保它的报文实体被正确识别，提取以及适当处理。为了实现报文实体能被正确的识别，HTTP提供了Content-Type实体首部字段来描述报文实体的媒体格式。</p>

<p><img src="http://7xtdq2.com1.z0.glb.clouddn.com/http_2_1.PNG" /></p>

<h2 id="一mime媒体类型">一:MIME.(媒体类型)</h2>
<p>  因特网上有数千种不同的数据类型，HTTP仔细地给每种要通过Web传输的对象都打上了名为MIME类型的数据格式标签。最初设计MIME(Multipurpose Internet Mail Extension,多用途因特网邮件扩展)是为了解决在不同的电子邮件系统之间搬移报文时存在的问题。MIME在电子邮件系统中工作的非常好，因此HTTP也采用了它，用来描述并标记多媒体内容。</p>

<p>  Web服务器会为所有的HTTP对象数据附加一个MIME类型。当Web浏览器从服务器中取回一个数据对象时，会去查看相关的MIME类型，看看自己能否知道应该如何处理这个对象。大多数浏览器都可以处理数百种常见的媒体数据类型，如显示图片，解析HTML等。首部字段Content-Type正式说明了体的MIME类型的实体首部字段。</p>

<p>  MIME类型由一个主媒体类型(比如:text,image,audio等)后面跟一条斜线以及一个子类型组成，子类型用于进一步描述媒体类型。</p>

<p> 常见的媒体格式如下:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>text/html: HTML文本格式
text/plain:纯文本格式
text/xml:XML格式

image/gif: gif类型的图片格式
image/jpeg: jpg类型的图片格式
image/png: png类型的图片格式

application/xml: XML数据格式
application/json: JSON数据格式
application/x-www-form/urlencoded:对表单数据进行默认编码为key/value的数据格式.

multipart/form-data:多部分数据格式，在上传数据时使用.
</code></pre>
</div>

<h2 id="二post提交表单数据编码格式">二:POST提交表单数据编码格式.</h2>

<p>  当我们用POST请求进行表单提交时，会将表单数据进行encoded(编码)后放入请求实体中。HTML的form表单的enctype属性用来指定请求的content-type属性值和对表单数据编码的方式。</p>

<p> form 表单提供了三种编码格式:</p>

<p>   <strong>1.application/x-www-form-urlencoded (默认)</strong></p>

<p>   <strong>2.multipart/form-data</strong></p>

<p>   <strong>3.text/plain 不可靠的方式，实际中不会使用。</strong></p>

<p> 下面是一个包含file上传的表单。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;form action="/FileUploadServlet"  method="POST"&gt;
	&lt;input type="text" name="username"/&gt;
	&lt;input type="password" name="password"/&gt;
	&lt;input type="file" name="fileName"/&gt;
	&lt;input type="submit" value="Send"/&gt;
&lt;/form&gt;
</code></pre>
</div>

<p>现在,假设我们在表单中依次输入: CYanLong 123456 并且添加了一张名为cover.jpg的图片。</p>

<h2 id="1applicationx-www-form-urlencoded默认">1.application/x-www-form-urlencoded(默认)</h2>
<p> 当我们没有对其指定enctype值或者显示指定enctype=”application/x-www-form-urlencoded”值时，Request报文的Content-Type字段值和请求实体如下:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>#Content-Type首部字段.
Content-Type:application/x-www-form-urlencoded

#请求实体内容.
username=CYanLong&amp;password=123456&amp;fileName=cover.jpg
</code></pre>
</div>

<p> 在这里，我们可以看出application/x-www-form-urlencoded对表单数据进行的编码方式：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>按照input节点的顺序对每个input的name/value之间加入'='，
并用&amp;连接并区分每一组name/value.

的确，正如它名字中的urlencoded，这种编码方式跟URL后面的查询参数编码类似.

注意，这里只是将文件名作为input的value值。对于图片的二进制数据，并没有传输.
</code></pre>
</div>

<h2 id="2多部分媒体类型和文件上传multipartform-data">2.多部分媒体类型和文件上传.(multipart/form-data)</h2>
<p>  从上面我们可以看出，默认 ( application/x-www-form-urlencoded ) 的编码方式只会将文件名作为 file 类型的 input 的value编码到请求实体。这种编码方式对于二进制等非字符数据无法有效的传输。</p>

<p>  所以，当上传文件时，我们需要重新指定 enctype 的值。</p>

<p>  MIME中的multipart(多部分)表示一个报文主体由多种不同类型数据组成，例如上面的表单提交，text和passwod等文本字段值和file类型的二进制文件数据需要在同一个请求实体中发送。</p>

<p>  当我们指定enctype=”multipart/form-data”，同样在表单中输入 CYanLong、 123456、 和名为cover.jpg的图片时，得到的Content-Type请求字段和请求实体如下:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>#请求首部字段Content-Type的值.
Content-Type:multipart/form-data;boundary=WebKitFormBoundary2PqYvKIeYWTL50nY

#请求实体内容.
--WebKitFormBoundary2PqYvKIeYWTL50nY
Content-Disposition:form-data;name="username"

CYanLong
--WebKitFormBoundary2PqYvKIeYWTL50nY
Content-Disposition:form-data;name="passowrd"

123456
--WebKitFormBoundary2PqYvKIeYWTL50nY
Content-Disposition:form-data;name="files";filename="cover.jpg"
Content-Type:image/jpeg


--WebKitFormBoundary2PqYvKIeYWTL50nY--
</code></pre>
</div>

<p> 由此，我们可以得到:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>1.Content-Type 设置了实体内容为multipart/data类型，并且表单字段数据被boundary字符串分割。

2.每个被分割开的表单字段都得到了Content-Disposition:form-data;name=&lt;表单名&gt;;fileName=&lt;文件名&gt;(如果是文件部分)
</code></pre>
</div>

<h2 id="三json数据格式的媒体类型applicationjson">三.JSON数据格式的媒体类型。(application/json)</h2>
<p>  提到JSON数据格式，就要简单聊一聊Ajax技术，它是一项利用JavaScript和DOM来进行局部页面替换的异步通信手段。我们来看看Ajax的全称:Asynchronous JavaScript and XML(异步 JavaScript 和 XML技术)，是的，在没有JSON之前，利用Ajax技术得到的服务器数据都是XML格式的。然而，JSON以它灵活，轻巧，易解析等优点已取代了XML成为了独立于语言的，非常流行的数据交互格式。</p>

<p>  这里主要是介绍JSON数据作为请求实体时的Content-Type值: application/json</p>

<p>  1.首先，我们来看看，当服务器端要返回JSON数据时该对Response做些什么? (以Java语言为例.)</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	response.setHeader("Content-Type","application/json");
	response.getWriter.write("{\"name\":\"ChenYanLong\",\"age\":\"20\"}");  //注:反斜杠为转义 " .
</code></pre>
</div>

<p>  上面两行Servlet代码很好理解，首先设置response报文中Content-Type首部字段的值为：<strong>application/json</strong>.然后输出Json格式的数据即可.</p>

<p>  同理，当客户端需要发送JSON格式的数据给服务器端时，只需要通过Ajax中XMLHttpRequest的setRequestHeader方法设置Content-Type值即可.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>xhr.setRequestHeader("Content-Type","application/json");
</code></pre>
</div>

<h2 id="总结">总结:</h2>
<p>  本篇文章主要介绍了一个非常重要且常用的实体首部字段:Content-Type。大致上，Content-Type就是用来说明对应的HTTP报文请求实体的媒体内容。</p>



            <!-- 上下篇 -->
            <div class="pager">
                
                <a class="previous" href="/js/2016/04/13/promise.html" data-toggle="tooltip" data-placement="top" title="详解promise">
                上一篇<br>
                <span>详解promise</span>
                </a>
                
                
                <a class="next" href="/http/2016/04/26/HTTP_3.html" data-toggle="tooltip" data-placement="top" title="浏览器缓存">
                下一篇<br>
                <span>浏览器缓存</span>
                </a>
                
            </div>

            <!-- 分享 -->
            <ul class="share">
                <li>
                    <span>分享到:</span>
                </li>
                <li>
                    <a class="qzone" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://xgcyjd2014.github.io/http/2016/04/25/HTTP_2.html&title=《Content-Type实体首部字段》 作者：YanLong 发布日期：2016-04-25 00:00:00 +0800&desc=&pics=http://xgcyjd2014.github.io/assets/img/share-logo.png&site=http://xgcyjd2014.github.io" target="__blank" title="分享到QQ空间"></a>
                </li>
                <li class="ml">
                    <a class="weibo" href="http://service.weibo.com/share/share.php?url=http://xgcyjd2014.github.io/http/2016/04/25/HTTP_2.html&title=《Content-Type实体首部字段》 作者：YanLong 发布日期：2016-04-25 00:00:00 +0800  &pic=http://xgcyjd2014.github.io/assets/img/share-logo.png&site=http://xgcyjd2014.github.io" target="__blank" title="分享到微博"></a>
                </li>
                <li class="ml">
                    <a class="twitter" href="https://twitter.com/intent/tweet?url=http://xgcyjd2014.github.io/http/2016/04/25/HTTP_2.html&text=《Content-Type实体首部字段》 作者：YanLong 发布日期：2016-04-25 00:00:00 +0800  " target="__blank" title="分享到推特"></a>
                </li>
                <li class="ml">
                    <a class="qq" href="http://connect.qq.com/widget/shareqq/index.html?url=http://xgcyjd2014.github.io/http/2016/04/25/HTTP_2.html&pics=http://xgcyjd2014.github.io/assets/img/share-logo.png&title=《Content-Type实体首部字段》 作者：YanLong 发布日期：2016-04-25 00:00:00 +0800&summary=" target="__blank" title="分享到推特"></a>
                </li>
            </ul>

            <div class="youyan">
                <!-- UY BEGIN -->
<!-- <div id="uyan_frame"></div>
<script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2129068"></script> -->
<!-- UY END -->

<!-- 来必力City版安装代码 -->
<div id="lv-container" data-id="city" data-uid="MTAyMC8zMDQxMi82OTY2">
	<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
	</script>
<noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- City版安装代码已完成 -->
            </div>
        </article>

        <!-- 书签目录 -->
        <section class="catalog">
            <div class="catalog-title">- CATALOG -</div>
            <div class="catalog-box">
                <ul class="catalog-list"></ul>
            </div>
        </section>

    </section>

	<footer>
								<!-- 
							信管创业基地 footer.html
							Design And Build By 倪云港
							Email: yungangni@gmail.com
							Github: http://github.com/niyungang
						 -->
						 
<footer class="footer">
	<div class="footer-top">
		<ul class="ul1">
			<p>
				网站相关
			</p>
			<li>
				<a href="/pages/about.html">关于我们</a>
			</li>
			<li>
				<a href="/pages/join.html">加入我们</a>
			</li>
			<li>
				<a href="https://github.com/xgcyjd2014/xgcyjd2014.github.io">关于本站</a>
			</li>
		</ul>

		<ul>
			<p>
				友情链接
			</p>
			<li>
				<a href="http://www.hlju.edu.cn/">黑龙江大学</a>
			</li>
			<li>
				<a href="http://xyw.hlju.edu.cn/">校园信息门户</a>
			</li>
			<li>
				<a href="http://my.hlju.edu.cn/">校园应用门户</a>
			</li>
		</ul>


		<ul class="footer-xk">
			<p>
				内容许可
			</p>
			<li>
				除特别说明外，用户内容均采用 <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 进行许可
			</li>
		</ul>

		<ul class="footer-img">
		</ul>

	</div>

	<div class="copyright">
		<p>
			<span>
				Copyright © 2002-2017
				<a href="http://www.xgcyjd.com">黑龙江大学信管创业基地</a>
			</span>
			<span>
				网站作者: <a href="http://www.niyungang.github.io">倪云港</a>
			</span>
			<span>
				维护支持: <a href="http://www.xgcyjd.com">信管创业基地</a> & <a href="http://www.niyungang.github.io">倪云港</a>
			</span>
			<span>
				当前呈现版本: V1.4
			</span>
		</p>
	</div>

</footer>



<footer class="footer-mob">
	<p>
		Copyright © 2002-2017 <a href="http://www.xgcyjd.com">黑龙江大学信管创业基地</a>
	</p>
	<p>
		除特别说明外，用户内容均采用 <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 进行许可
	</p>
	<p>
		维护支持: <a href="http://www.xgcyjd.com">信管创业基地</a> & <a href="http://niyungang.github.io">倪云港</a>
	</p>
	<p>
		网站作者: <a href="http://niyungang.github.io">倪云港</a>
	</p>
	<p>
		当前呈现版本: V1.4
	</p>
</footer>
	</footer>
</body>
    						<!-- 
							信管创业基地 script-post.html
							Design And Build By 倪云港
							Email: yungangni@gmail.com
							Github: http://github.com/niyungang
						 -->
						 
<!-- 
	文章主体
 -->

<!-- 文章内容 -->

<script src="/assets/js/jquery-3.1.1.min.js"></script>
<script src="/assets/js/post.js"></script>
<script src="/assets/js/main.js"></script>
</html>
