!function(){function e(){t(),i(),a(),r(),d(),o(H.offsetWidth,H.offsetHeight),c()}function t(){V=new FSS.CanvasRenderer,n(x.renderer)}function n(e){switch(m&&A.removeChild(m.element),e){case w:m=p;break;case M:m=V;break;case R:m=b}m.setSize(H.offsetWidth,H.offsetHeight),A.appendChild(m.element)}function i(){h=new FSS.Scene}function a(){h.remove(u),m.clear(),g=new FSS.Plane(v.width*m.width,v.height*m.height,v.segments,v.slices),F=new FSS.Material(v.ambient,v.diffuse),u=new FSS.Mesh(g,F),h.add(u);var e,t;for(e=g.vertices.length-1;e>=0;e--)t=g.vertices[e],t.anchor=FSS.Vector3.clone(t.position),t.step=FSS.Vector3.create(Math.randomInRange(.2,1),Math.randomInRange(.2,1),Math.randomInRange(.2,1)),t.time=Math.randomInRange(0,Math.PIM2)}function r(){var e,t;for(e=h.lights.length-1;e>=0;e--)t=h.lights[e],h.remove(t);for(m.clear(),e=0;e<y.count;e++)t=new FSS.Light(y.ambient,y.diffuse),t.ambientHex=t.ambient.format(),t.diffuseHex=t.diffuse.format(),h.add(t),t.mass=Math.randomInRange(.5,1),t.velocity=FSS.Vector3.create(),t.acceleration=FSS.Vector3.create(),t.force=FSS.Vector3.create(),t.ring=document.createElementNS(FSS.SVGNS,"circle"),t.ring.setAttributeNS(null,"stroke",t.ambientHex),t.ring.setAttributeNS(null,"stroke-width","0.5"),t.ring.setAttributeNS(null,"fill","none"),t.ring.setAttributeNS(null,"r","10"),t.core=document.createElementNS(FSS.SVGNS,"circle"),t.core.setAttributeNS(null,"fill",t.diffuseHex),t.core.setAttributeNS(null,"r","4")}function o(e,t){m.setSize(e,t),FSS.Vector3.set(N,m.halfWidth,m.halfHeight),a()}function c(){f=Date.now()-I,s(),S(),requestAnimationFrame(c)}function s(){var e,t,n,i,a,r,o,c=v.depth/2;for(FSS.Vector3.copy(y.bounds,N),FSS.Vector3.multiplyScalar(y.bounds,y.xyScalar),FSS.Vector3.setZ(z,y.zOffset),e=Math.sin(y.step[0]*f*y.speed),t=Math.cos(y.step[1]*f*y.speed),FSS.Vector3.set(z,y.bounds[0]*e,y.bounds[1]*t,y.zOffset),i=h.lights.length-1;i>=0;i--){a=h.lights[i],FSS.Vector3.setZ(a.position,y.zOffset);var s=Math.clamp(FSS.Vector3.distanceSquared(a.position,z),y.minDistance,y.maxDistance),S=y.gravity*a.mass/s;FSS.Vector3.subtractVectors(a.force,z,a.position),FSS.Vector3.normalise(a.force),FSS.Vector3.multiplyScalar(a.force,S),FSS.Vector3.set(a.acceleration),FSS.Vector3.add(a.acceleration,a.force),FSS.Vector3.add(a.velocity,a.acceleration),FSS.Vector3.multiplyScalar(a.velocity,y.dampening),FSS.Vector3.limit(a.velocity,y.minLimit,y.maxLimit),FSS.Vector3.add(a.position,a.velocity)}for(r=g.vertices.length-1;r>=0;r--)o=g.vertices[r],e=Math.sin(o.time+o.step[0]*f*v.speed),t=Math.cos(o.time+o.step[1]*f*v.speed),n=Math.sin(o.time+o.step[2]*f*v.speed),FSS.Vector3.set(o.position,v.xRange*g.segmentWidth*e,v.yRange*g.sliceHeight*t,v.zRange*c*n-c),FSS.Vector3.add(o.position,o.anchor);g.dirty=!0}function S(){m.render(h)}function d(){window.addEventListener("resize",l)}function l(e){o(H.offsetWidth,H.offsetHeight),S()}var f,m,h,u,g,F,p,V,b,v={width:1.2,height:1.9,depth:10,segments:16,slices:8,xRange:.8,yRange:.1,zRange:1,speed:2e-4,ambient:"#16b5e6",diffuse:"#d9a2a2"},y={count:2,zOffset:65,ambient:"#101750",diffuse:"#2acdcd",speed:5e-4,gravity:1200,dampening:.95,minLimit:10,maxLimit:50,minDistance:20,maxDistance:800,autopilot:!0,draw:!1,bounds:FSS.Vector3.create(),step:FSS.Vector3.create(Math.randomInRange(.2,1),Math.randomInRange(.2,1),Math.randomInRange(.2,1)),xyScalar:1},w="webgl",M="canvas",R="svg",x={renderer:M},I=Date.now(),N=FSS.Vector3.create(),z=FSS.Vector3.create(),H=document.getElementById("low-poly-container"),A=document.getElementById("output");e()}();