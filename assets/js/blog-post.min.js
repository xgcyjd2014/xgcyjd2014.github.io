---
---
/*--------------------------------------------*\
              xgjd blog-post js
           Design And Build By Owen
      Github:http://github.com/numerhero

\*--------------------------------------------*/

{% capture posts %}
    [
        {% for post in site.posts %}
        {
            "title"  : "{{ post.title }}",
            "url"    : "{{ post.url }}",
            "date"   : "{{ post.date | %Y%M | date_to_string }}",
            "content": "{{ post.content | escape }}",
            "category": "{{ post.category }}",
            "description": "{{ post.description }}",
            "author": "{{ post.author }}",
            "tagpic": "{{ post.tagpic }}",
            "description": "{{ post.description }}"
        }{% if forloop.last %}{% else %},{% endif %}
        {% endfor %}
    ]
{% endcapture %}

var posts = {{ posts | strip_newlines }};
!function(t){$window=$(window);var e=3,n=$(".bg-wrap img"),o=Math.floor(Math.random()*e)+1;n[0].src="/assets/img/blog-post/bg"+o+".jpg",$.fn.Drag=function(t){var e=this;e.on("mousedown",function(n){var o=n.clientX-e.position().left,i=n.clientY-e.position().top,s=n.clientX-e.offset().left,a=n.clientY-e.offset().top,l=e.offset().left,c=e.offset().top;$(document).on("mousemove.drag",function(e){var n=e.clientY-i,r=e.clientX-o,d=e.clientY-a,h=e.clientX-s,f=l-r,p=c-n;t&&t({top:n,left:r,kTop:d,kLeft:h,cLeft:l,cTop:c,pLeft:r/l*100,pTop:n/c*100,dLeft:f,dTop:p})}),$(document).on("mouseup.drag",function(){$(document).off("mousemove.drag"),e.off("mouseup.drag")})})},$.fn.Scroll=function(t){var e=this.find("ul"),n=this.find(".scroll-bar-box"),o=n.find(".scroll-bar"),i=556,s=e.outerHeight(),a=556,l=s-a,c=l*i/s,r=i-c;return 0>=l?void n.css("display","none"):(o.css("height",r),o.Drag(function(t){var n=t.top;n>c?n=c:0>=n&&(n=0),o.css("top",n),e.css("marginTop",-(n*l/c))}),void this.on("mousewheel",function(t,n){var i=o.position().top,s=10,a=i+-n*s;return a>c?a=c:0>=a&&(a=0),o.css("top",a),e.css("marginTop",-(a*l/c)),!1}))};var i=$("article"),s=$(".tree-list-wrap"),a=$(".tree-list-box"),l=$(".tree-list"),c=$(".scroll-bar-box"),r=($(".scroll-bar"),$(".btns-list-wrap")),d=$(".plane-wrap"),h=$(".back-top-btn"),f=$(".plane");$(function(){r.css("right",.16*innerWidth),d.hover(function(){h.addClass("back-top-btn-active"),f.css("bottom","14px")},function(){h.removeClass("back-top-btn-active"),f.css("bottom","-80px")}),d.on("click",function(){h.removeClass("back-top-btn-active"),r.css("opacity","0"),d.animate({top:"-5000px"},500,function(){d.css("top","-5px")}),$("html,body").animate({scrollTop:"0"},800)}),$window.on("scroll.btnList",function(){var t=$window.scrollTop();t>=600?(r.css("display","block"),r.css("opacity","1")):(r.css("opacity","0"),setTimeout(function(){r.css("display","none")},500))})}),$(function(){var t=$(".pic-show-wrap"),e=$(".pic-show-wrap img");i.delegate("img","click",function(n){t.removeClass("pic-show-hidden"),e[0].src=n.target.src}),t.on("click",function(e){t.addClass("pic-show-hidden"),e.stopPropagation()}),e.on("click",function(t){t.stopPropagation()}),$window.on("resize",function(){t.css("width",innerWidth),t.css("height",innerHeight)})}),$(function(){$window.on("scroll",function(){var t=$window.scrollTop();600>=t?i.css("top",600-t):i.css("top",0)})}),$(function(){function t(){function t(){var t=$window.scrollTop();t>=320?(s.css("transition-delay","0s"),a.css("transition-delay","0.5s"),s.css("right",0),a.removeClass("tree-list-box-hidden")):(a.css("transition-delay","0s"),s.css("transition-delay","0.8s"),a.addClass("tree-list-box-hidden"),s.css("right",-c))}$window.on("scroll.treeListShow",t),t()}var e=[],n=null,o="",i=0,c=innerWidth,r=.14;innerWidth<1200&&(c=1200),s.css("width",c*r),s.css("right",-c),s.css("transition","0.5s"),$(".article-box").children("h2,h3").each(function(){var t=$(this),o=$(this).prop("tagName").toLowerCase();if("h2"===o){var s,a={child:[],content:t.html()};e.push(a),s=o+"-"+e.length,a.cName=s,a.num=e.length-1,t.attr("id",s),n=a}if("h3"===o){var s=o+"-"+ ++i;t.attr("id",s),n.child.push({cName:s,content:t.html(),num:n.child.length})}}),$.each(e,function(t,e){if(o+='<li class="h2-tag"><span class="tag-icon"></span><button data-tag-index="'+e.num+'" data-index="'+e.cName+'" >'+e.content+"</button></li>",e.child.length){var n=e;$.each(e.child,function(t,e){o+='<li class="h3-tag"><button data-father-index="'+n.num+'" data-tag-index="'+e.num+'" data-index="'+e.cName+'" >'+e.content+"</button></li>"})}}),l.html(o),l.delegate("button","click",function(t){var n,o=t.target,i=o.dataset.tagIndex,s=o.dataset.index,a=0;if(/^h3/.test(s)){var l=o.dataset.fatherIndex;n=$("#"+e[l].child[i].cName),a=n.position().top}else n=$("#"+e[i].cName),a=n.position().top,0==i&&(a+=270);$("html,body").animate({scrollTop:a+"px"},800),n.addClass("title--move-active"),setTimeout(function(){n.removeClass("title--move-active")},1300)}),t()}),$(function(){a.Scroll(),a.hover(function(){c.removeClass("fade-in")},function(){c.addClass("fade-in")})}),$(function(){var t=$(".skip--last"),e=t.find("a"),n=e.find("p"),o=$(".skip--next"),i=o.find("a"),s=i.find("p");oTitle=$(".article-title"),flag=0,pathname=window.location.pathname,origin=window.location.origin;for(var a=0;a<posts.length;a++)if(posts[a].url===pathname){flag=a;break}switch(!0){case 0===flag:t.addClass("none"),i[0].href=origin+posts[flag+1].url,s.html(posts[flag+1].title);break;case flag===posts.length-1:o.addClass("none"),e[0].href=origin+posts[flag-1].url,n.html(posts[flag-1].title);break;case 0===flag&&flag===posts.length-1:t.addClass("none"),o.addClass("none");default:i[0].href=origin+posts[flag+1].url,s.html(posts[flag+1].title),e[0].href=origin+posts[flag-1].url,n.html(posts[flag-1].title)}})}(jQuery),function(t){function e(e){var n=e||window.event,o=[].slice.call(arguments,1),i=0,s=0,a=0;return e=t.event.fix(n),e.type="mousewheel",n.wheelDelta&&(i=n.wheelDelta/120),n.detail&&(i=-n.detail/3),a=i,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(a=0,s=-1*i),void 0!==n.wheelDeltaY&&(a=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(s=-1*n.wheelDeltaX/120),o.unshift(e,i,s,a),(t.event.dispatch||t.event.handle).apply(this,o)}var n=["DOMMouseScroll","mousewheel"];if(t.event.fixHooks)for(var o=n.length;o;)t.event.fixHooks[n[--o]]=t.event.mouseHooks;t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=n.length;t;)this.addEventListener(n[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=n.length;t;)this.removeEventListener(n[--t],e,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}(jQuery);